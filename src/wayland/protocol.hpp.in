// SPDX-License-Identifier: MIT
// SPDX-FileCopyrightText: 2026 Maikel Nadolski <maikel.nadolski@gmail.com>

/*
 * WARNING: This file is automatically generated from wayland.xml.
 * Any manual modifications to this file will be lost when the generator is rerun.
 * 
 * To make changes, please modify the corresponding Wayland XML protocol 
 * definition or update the generator logic itself.
 */

#pragma once

#include "AsyncQueue.hpp"
#include "wayland/connection.hpp"

#include <cstdint>
#include <string>

namespace ms::wayland {

{% for interface in interfaces %}class {{interface.name}};
{% endfor %}

{% for interface in interfaces %}
class {{ interface.name }} {
public:
{% for entry in interface.enums %}
{% if entry.description %}/** @brief {{ entry.description }} */{% endif %}
  enum class {{ entry.name }} : uint32_t {
    {% for enum_value in entry.entries %}{{ enum_value.name }} = {{ enum_value.value }}{% if enum_value.__not_last %},{% endif %}{% endfor %}
  };
{% endfor %}

{% for event in interface.events %}
{% if event.description %}/** @brief {{ event.description }} */
{% endif %}struct {{ event.name }};
{% endfor %}
{% if interface.events %}
  auto events() -> Observable<{% for event in interface.events %}{% if event.__tail %}, {% endif %}{{ event.name }}{% endfor %}>;
{% endif %}

{% for request in interface.requests %}
  {% if request.description %}/** @brief {{ request.description }} */{% endif %}
  {% if request.return_type %}auto{% else %}void{% endif %}
  {{ request.name }}({% for arg in request.args %}{% if arg.__tail %}, {% endif %}{{arg.type}} {{arg.name}}{% endfor %})
  {% if request.return_type %}-> {{ request.return_type }}{% endif %};
{% endfor %}
private:
  connection_handle mConnection;{% if interface.events %}
  AsyncQueue<{% for event in interface.events %}{% if event.__tail %}, {% endif %}{{ event.name }}{% endfor %}> mEventQueue;{% endif %}
};
{% endfor %}

} // namespace ms
